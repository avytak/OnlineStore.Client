<div class="mobile-menu-overlay" [class.active]="true">
  <!-- Top: Gender switch and close -->
  <div class="mobile-menu-header">
    <div class="gender-switch">
      <button (click)="setGender(Gender.Her)" [class.active]="activeGender === Gender.Her">She</button>
      <button (click)="setGender(Gender.Him)" [class.active]="activeGender === Gender.Him">He</button>
    </div>
    <div class="user-action-panel">
      <button class="user-action-panel__basket"></button>
      <button class="user-action-panel__auth" (click)="openDialog()"></button>
      <button class="user-action-panel__close close-btn" (click)="closeMenu()"></button>
    </div>
  </div>

  <!-- Main view: List of categories -->
  <ng-container *ngIf="currentView === MenuView.Main">
    <ul class="menu-category-list">
      <li *ngFor="let item of menuItems">
        <button class="category-item" (click)="openSubcategory(item.label)">
          <span [innerHTML]="item.label"></span>
          <span class="category-item__arrow-icon"></span>
        </button>
      </li>
    </ul>
  </ng-container>

  <!-- Subcategory view -->
  <ng-container *ngIf="currentView === MenuView.Subcategory">
    <div class="subcategory-header">
      <button class="back-btn" (click)="backToMain()"></button>
      <h3>{{ selectedCategory }}</h3>
    </div>

    <div class="subcategory-blocks">
      <div class="subcategory-list" *ngFor="let group of subcategories[selectedCategory!]">
        <ng-container *ngIf="group.title | displayGender:activeGender">
          <h5 class="subcategory-title">{{ group.title }}</h5>
          <ul class="subblock-list">
            <li *ngFor="let item of group.items">
              <a [routerLink]="item.route">{{ item.label }}</a>
            </li>
          </ul>
        </ng-container>
      </div>
    </div>
  </ng-container>
</div>
